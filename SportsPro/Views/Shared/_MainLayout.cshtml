@using Microsoft.AspNetCore.Identity
@inject SignInManager<User> signInManager
@{
    Layout = "_Layout";
    string controller =
        ViewContext.RouteData.Values["controller"].ToString();
    string action_router =
        ViewContext.RouteData.Values["action"].ToString();
}


    @RenderSection("validation", false)

<header>
    <nav class="navbar navbar-expand-md navbar-dark bg-secondary">
        <a class="navbar-brand" href="/">SportsPro</a>
        <button class="navbar-toggler" type="button"
                data-toggle="collapse" data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <nav class="collapse navbar-collapse" id="navbarSupportedContent">
            <div class="navbar-nav mr-auto">
                <a class="nav-item nav-link 
                   @(controller == "Home" && action_router == "Index" ? "active" : "")" asp-controller="Home" asp-action="Index">Home</a>
                <a class="nav-item nav-link 
                   @(controller == "Product" && action_router == "Index" ? "active" : "")" asp-controller="Product" asp-action="Index">Products</a>
                <a class="nav-item nav-link 
                   @(controller == "Technician" && action_router == "Index" ? "active" : "")" asp-controller="Technician" asp-action="Index">Technicians</a>
                <a class="nav-item nav-link 
                   @(controller == "Customer" && action_router == "Index" ? "active" : "")" asp-controller="Customer" asp-action="Index">Customers</a>
                <a class="nav-item nav-link 
                   @(controller == "Incident" && action_router == "Index" ? "active" : "")" asp-controller="Incident" asp-action="Index">Incidents</a>
                <a class="nav-item nav-link " asp-controller="Registration" asp-action="GetCustomer">Registrations</a>
            </div>
            <div class="navbar-nav navbar-right">
                @if (signInManager.IsSignedIn(User)) 
                {
                    // signed-in user - Log Out button and username
                    <li class="nav-item">
                        <form method="post" asp-action="Logout" asp-controller="Account"
                              asp-area="">
                            <input type="submit" value="Log Out"
                                   class="btn btn-outline-light" />
                            <span class="text-light">@User.Identity.Name</span>
                        </form>
                    </li>
                }
                else
                {
                    //get current action
                    var action = ViewContext.RouteData.Values["action"]?.ToString();

                    // anonymous user - Register link and Log In button
                    <li class="nav-item @Nav.Active("Register", action)">
                        <a asp-action="Register" asp-controller="Account"
                           asp-area="" class="nav-link">Register</a>
                    </li>
                    
                    <li class="nav-item">
                        <a asp-action="Login" asp-controller="Account"
                           asp-area="" class="btn btn-outline-light">Log In</a>
                    </li>
                }
                <a class="nav-item nav-link 
                   @(controller == "Home" && action_router == "About" ? "active" : "")" asp-controller="Home" asp-action="About">About</a>
            </div>
        </nav>
    </nav>
</header>

<div class="container">
    <main role="main" class="pb-5">
        @if (TempData.Keys.Contains("message"))
            {
                <h4 class="bg-info text-center text-white p-2">
                    @TempData["message"]
                </h4>
            }
        @RenderBody()
    </main>
</div>

<footer class="border-top footer text-muted">
    <div class="container">&copy; @DateTime.Now.Year - SportsPro</div>
</footer>
